var A=Object.defineProperty;var P=(i,e,t)=>e in i?A(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var c=(i,e,t)=>P(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const d of a.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();class O{constructor(e,t){this._notifyMethod=e,this._notifyContext=t}notifyObserver(e){this._notifyMethod.call(this._notifyContext,e)}compareNotifyContext(e){return this._notifyContext===e}get notifyMethod(){return this._notifyMethod}set notifyMethod(e){this._notifyMethod=e}get notifyContext(){return this._notifyContext}set notifyContext(e){this._notifyContext=e}}class g{constructor(e){if(g.instanceMap.get(e)!=null)throw new Error(g.MULTITON_MSG);this.multitonKey=e,g.instanceMap.set(this.multitonKey,this),this.mediatorMap=new Map,this.observerMap=new Map,this.initializeView()}initializeView(){}static getInstance(e,t){return g.instanceMap==null&&(g.instanceMap=new Map),g.instanceMap.get(e)==null&&g.instanceMap.set(e,t(e)),g.instanceMap.get(e)}registerObserver(e,t){this.observerMap.get(e)!=null?this.observerMap.get(e).push(t):this.observerMap.set(e,new Array(t))}notifyObservers(e){if(this.observerMap.has(e.name)){let t=this.observerMap.get(e.name).slice();for(let n=0;n<t.length;n++)t[n].notifyObserver(e)}}removeObserver(e,t){let n=this.observerMap.get(e);for(let r=0;r<n.length;r++)if(n[r].compareNotifyContext(t)===!0){n.splice(r,1);break}n.length===0&&this.observerMap.delete(e)}registerMediator(e){if(this.mediatorMap.has(e.mediatorName)!==!1)return;e.initializeNotifier(this.multitonKey),this.mediatorMap.set(e.mediatorName,e);let t=e.listNotificationInterests();if(t.length>0){let n=new O(e.handleNotification.bind(e),e);for(let r=0;r<t.length;r++)this.registerObserver(t[r],n)}e.onRegister()}retrieveMediator(e){return this.mediatorMap.get(e)||null}removeMediator(e){let t=this.mediatorMap.get(e);if(t){let n=t.listNotificationInterests();for(let r=0;r<n.length;r++)this.removeObserver(n[r],t);this.mediatorMap.delete(e),t.onRemove()}return t}hasMediator(e){return this.mediatorMap.has(e)}static removeView(e){this.instanceMap.delete(e)}static get MULTITON_MSG(){return"View instance for this Multiton key already constructed!"}}class p{constructor(e){if(p.instanceMap[e]!=null)throw new Error(p.MULTITON_MSG);this.multitonKey=e,p.instanceMap.set(this.multitonKey,this),this.commandMap=new Map,this.initializeController()}initializeController(){this.view=g.getInstance(this.multitonKey,e=>new g(e))}static getInstance(e,t){return p.instanceMap==null&&(p.instanceMap=new Map),p.instanceMap.get(e)==null&&p.instanceMap.set(e,t(e)),p.instanceMap.get(e)}executeCommand(e){let t=this.commandMap.get(e.name);if(t==null)return;let n=t();n.initializeNotifier(this.multitonKey),n.execute(e)}registerCommand(e,t){this.commandMap.get(e)==null&&this.view.registerObserver(e,new O(this.executeCommand,this)),this.commandMap.set(e,t)}hasCommand(e){return this.commandMap.has(e)}removeCommand(e){this.hasCommand(e)&&(this.view.removeObserver(e,this),this.commandMap.delete(e))}static removeController(e){p.instanceMap.delete(e)}static get MULTITON_MSG(){return"Controller instance for this Multiton key already constructed!"}}class M{constructor(e){if(M.instanceMap.get(e)!=null)throw new Error(M.MULTITON_MSG);this.multitonKey=e,M.instanceMap.set(this.multitonKey,this),this.proxyMap=new Map,this.initializeModel()}initializeModel(){}static getInstance(e,t){return M.instanceMap==null&&(M.instanceMap=new Map),M.instanceMap.get(e)==null&&M.instanceMap.set(e,t(e)),M.instanceMap.get(e)}registerProxy(e){e.initializeNotifier(this.multitonKey),this.proxyMap.set(e.proxyName,e),e.onRegister()}retrieveProxy(e){return this.proxyMap.get(e)||null}hasProxy(e){return this.proxyMap.has(e)}removeProxy(e){let t=this.proxyMap.get(e);return t!=null&&(this.proxyMap.delete(e),t.onRemove()),t}static removeModel(e){M.instanceMap.delete(e)}static get MULTITON_MSG(){return"Model instance for this Multiton key already constructed!"}}class B{constructor(e,t=null,n=""){this._name=e,this._body=t,this._type=n}get name(){return this._name}get body(){return this._body}set body(e){this._body=e}get type(){return this._type}set type(e){this._type=e}toString(){let e="Notification Name: "+this.name;return e+=`
Body:`+(this.body==null?"null":this.body.toString()),e+=`
Type:`+(this.type==null?"null":this.type),e}}class f{constructor(e){if(f.instanceMap[e]!=null)throw new Error(f.MULTITON_MSG);this.initializeNotifier(e),f.instanceMap.set(this.multitonKey,this),this.initializeFacade()}initializeFacade(){this.initializeModel(),this.initializeController(),this.initializeView()}static getInstance(e,t){return f.instanceMap==null&&(f.instanceMap=new Map),f.instanceMap.get(e)==null&&f.instanceMap.set(e,t(e)),f.instanceMap.get(e)}initializeModel(){this.model==null&&(this.model=M.getInstance(this.multitonKey,e=>new M(e)))}initializeController(){this.controller==null&&(this.controller=p.getInstance(this.multitonKey,e=>new p(e)))}initializeView(){this.view==null&&(this.view=g.getInstance(this.multitonKey,e=>new g(e)))}registerCommand(e,t){this.controller.registerCommand(e,t)}hasCommand(e){return this.controller.hasCommand(e)}removeCommand(e){this.controller.removeCommand(e)}registerProxy(e){this.model.registerProxy(e)}removeProxy(e){return this.model.removeProxy(e)}hasProxy(e){return this.model.hasProxy(e)}retrieveProxy(e){return this.model.retrieveProxy(e)}registerMediator(e){this.view.registerMediator(e)}removeMediator(e){return this.view.removeMediator(e)}hasMediator(e){return this.view.hasMediator(e)}retrieveMediator(e){return this.view.retrieveMediator(e)}sendNotification(e,t=null,n=""){this.notifyObservers(new B(e,t,n))}notifyObservers(e){this.view.notifyObservers(e)}initializeNotifier(e){this.multitonKey=e}static hasCore(e){return this.instanceMap.has(e)}static removeCore(e){f.instanceMap.get(e)!=null&&(M.removeModel(e),g.removeView(e),p.removeController(e),this.instanceMap.delete(e))}static get MULTITON_MSG(){return"Facade instance for this Multiton key already constructed!"}}class S{constructor(){}sendNotification(e,t=null,n=""){this.facade!=null&&this.facade.sendNotification(e,t,n)}initializeNotifier(e){this.multitonKey=e}get facade(){if(this.multitonKey==null)throw new Error(S.MULTITON_MSG);return f.getInstance(this.multitonKey,e=>new f(e))}static get MULTITON_MSG(){return"multitonKey for this Notifier not yet initialized!"}}class U extends S{constructor(){super()}execute(e){}}class C extends S{constructor(e,t=null){super(),this._mediatorName=e||C.NAME,this._viewComponent=t}onRegister(){}onRemove(){}listNotificationInterests(){return[]}handleNotification(e){}get mediatorName(){return this._mediatorName}get viewComponent(){return this._viewComponent}set viewComponent(e){this._viewComponent=e}static get NAME(){return"Mediator"}}class x extends S{constructor(e,t=null){super(),this._proxyName=e||x.NAME,this._data=t}onRegister(){}onRemove(){}get proxyName(){return this._proxyName}get data(){return this._data}set data(e){this._data=e}static get NAME(){return"Proxy"}}const h=class h{constructor(e,t){this.id=e,this.name=t}static get list(){return[h.ACCT,h.SALES,h.PLANT,h.SHIPPING,h.QC]}static get comboList(){let e=h.list;return e.unshift(h.NONE_SELECTED),e}equals(e){return this.id===e.id&&this.name===e.name}};c(h,"NONE_SELECTED",new h(0,"---None Selected---")),c(h,"ACCT",new h(1,"Accounting")),c(h,"SALES",new h(2,"Sales")),c(h,"PLANT",new h(3,"Plant")),c(h,"SHIPPING",new h(4,"Shipping")),c(h,"QC",new h(5,"Quality Control"));let I=h;const o=class o{constructor(e,t){this.id=e,this.name=t}static get list(){return[o.ADMIN,o.ACCT_PAY,o.ACCT_RCV,o.EMP_BENEFITS,o.GEN_LEDGER,o.PAYROLL,o.INVENTORY,o.PRODUCTION,o.QUALITY_CTL,o.SALES,o.ORDERS,o.CUSTOMERS,o.SHIPPING,o.RETURNS]}static get comboList(){let e=o.list;return e.unshift(o.NONE_SELECTED),e}equals(e){return this.id===e.id&&this.name===e.name}};c(o,"NONE_SELECTED",new o(0,"--None Selected---")),c(o,"ADMIN",new o(1,"Administrator")),c(o,"ACCT_PAY",new o(2,"Accounts Payable")),c(o,"ACCT_RCV",new o(3,"Accounts Receivable")),c(o,"EMP_BENEFITS",new o(4,"Employee Benefits")),c(o,"GEN_LEDGER",new o(5,"General Ledger")),c(o,"PAYROLL",new o(6,"Payroll")),c(o,"INVENTORY",new o(7,"Inventory")),c(o,"PRODUCTION",new o(8,"Production")),c(o,"QUALITY_CTL",new o(9,"Quality Control")),c(o,"SALES",new o(10,"Sales")),c(o,"ORDERS",new o(11,"Orders")),c(o,"CUSTOMERS",new o(12,"Customers")),c(o,"SHIPPING",new o(13,"Shipping")),c(o,"RETURNS",new o(14,"Returns"));let y=o;class N{constructor(e,t,n,r,a,d,m,E){this.id=e,this.username=t||"",this.first=n||"",this.last=r||"",this.email=a||"",this.password=d||"",this.department=m||I.NONE_SELECTED,this.roles=E||[]}isValid(e){return this.username!==""&&this.first!==""&&this.last!==""&&this.email!==""&&this.password!==""&&this.password===e&&this.department.id!==0}}class R extends x{static get NAME(){return"RoleProxy"}constructor(){super(R.NAME,[])}addRoleToUser(e,t){e.roles.push(t)}removeRoleFromUser(e,t){for(let n=0;n<e.roles.length;n++)if(e.roles[n].id===t.id){e.roles.splice(n,1);break}}}class L extends x{static get NAME(){return"UserProxy"}constructor(){super(L.NAME,[])}add(e){this.users.push(e)}update(e){for(let t=0;t<this.users.length;t++)if(e.id===this.users[t].id){this.users[t]=e;break}}remove(e){for(let t=0;t<this.users.length;t++)e.id===this.users[t].id&&this.users.splice(t,1)}newInsertId(){return this.users[this.users.length-1].id+1}get users(){return this.data}}const l={};Math.linearTween=function(i,e,t,n){return t*i/n+e};l.easeInQuad=function(i,e,t,n){return t*(i/=n)*i+e};l.easeOutQuad=function(i,e,t,n){return-t*(i/=n)*(i-2)+e};l.easeInOutQuad=function(i,e,t,n){return(i/=n/2)<1?t/2*i*i+e:-t/2*(--i*(i-2)-1)+e};l.easeInCubic=function(i,e,t,n){return t*(i/=n)*i*i+e};l.easeOutCubic=function(i,e,t,n){return t*((i=i/n-1)*i*i+1)+e};l.easeInOutCubic=function(i,e,t,n){return(i/=n/2)<1?t/2*i*i*i+e:t/2*((i-=2)*i*i+2)+e};l.easeInQuart=function(i,e,t,n){return t*(i/=n)*i*i*i+e};l.easeOutQuart=function(i,e,t,n){return-t*((i=i/n-1)*i*i*i-1)+e};l.easeInOutQuart=function(i,e,t,n){return(i/=n/2)<1?t/2*i*i*i*i+e:-t/2*((i-=2)*i*i*i-2)+e};l.easeInQuint=function(i,e,t,n){return t*(i/=n)*i*i*i*i+e};l.easeOutQuint=function(i,e,t,n){return t*((i=i/n-1)*i*i*i*i+1)+e};l.easeInOutQuint=function(i,e,t,n){return(i/=n/2)<1?t/2*i*i*i*i*i+e:t/2*((i-=2)*i*i*i*i+2)+e};l.easeInSine=function(i,e,t,n){return-t*Math.cos(i/n*(Math.PI/2))+t+e};l.easeOutSine=function(i,e,t,n){return t*Math.sin(i/n*(Math.PI/2))+e};l.easeInOutSine=function(i,e,t,n){return-t/2*(Math.cos(Math.PI*i/n)-1)+e};l.easeInExpo=function(i,e,t,n){return i===0?e:t*Math.pow(2,10*(i/n-1))+e};l.easeOutExpo=function(i,e,t,n){return i===n?e+t:t*(-Math.pow(2,-10*i/n)+1)+e};l.easeInOutExpo=function(i,e,t,n){return i===0?e:i===n?e+t:(i/=n/2)<1?t/2*Math.pow(2,10*(i-1))+e:t/2*(-Math.pow(2,-10*--i)+2)+e};l.easeInCirc=function(i,e,t,n){return-t*(Math.sqrt(1-(i/=n)*i)-1)+e};l.easeOutCirc=function(i,e,t,n){return t*Math.sqrt(1-(i=i/n-1)*i)+e};l.easeInOutCirc=function(i,e,t,n){return(i/=n/2)<1?-t/2*(Math.sqrt(1-i*i)-1)+e:t/2*(Math.sqrt(1-(i-=2)*i)+1)+e};l.easeInElastic=function(i,e,t,n,r,a){return i===0?e:(i/=n)===1?e+t:(a||(a=n*.3),r<Math.abs(t)&&(r=t),-(r*Math.pow(2,10*(i-=1))*Math.sin((i*n-s)*(2*Math.PI)/a))+e)};l.easeOutElastic=function(i,e,t,n,r,a){return i===0?e:(i/=n)===1?e+t:(a||(a=n*.3),r<Math.abs(t)&&(r=t),r*Math.pow(2,-10*i)*Math.sin((i*n-s)*(2*Math.PI)/a)+t+e)};l.easeInOutElastic=function(i,e,t,n,r,a){return i===0?e:(i/=n/2)===2?e+t:(a||(a=n*(.3*1.5)),r<Math.abs(t)&&(r=t),i<1?-.5*(r*Math.pow(2,10*(i-=1))*Math.sin((i*n-s)*(2*Math.PI)/a))+e:r*Math.pow(2,-10*(i-=1))*Math.sin((i*n-s)*(2*Math.PI)/a)*.5+t+e)};l.easeInBack=function(i,e,t,n,r){return r===void 0&&(r=1.70158),t*(i/=n)*i*((r+1)*i-r)+e};l.easeOutBack=function(i,e,t,n,r){return r===void 0&&(r=1.70158),t*((i=i/n-1)*i*((r+1)*i+r)+1)+e};l.easeInOutBack=function(i,e,t,n,r){return r===void 0&&(r=1.70158),(i/=n/2)<1?t/2*(i*i*(((r*=1.525)+1)*i-r))+e:t/2*((i-=2)*i*(((r*=1.525)+1)*i+r)+2)+e};l.easeInBounce=function(i,e,t,n){return t-l.easeOutBounce(n-i,0,t,n)+e};l.easeOutBounce=function(i,e,t,n){return(i/=n)<1/2.75?t*(7.5625*i*i)+e:i<2/2.75?t*(7.5625*(i-=1.5/2.75)*i+.75)+e:i<2.5/2.75?t*(7.5625*(i-=2.25/2.75)*i+.9375)+e:t*(7.5625*(i-=2.625/2.75)*i+.984375)+e};l.easeInOutBounce=function(i,e,t,n){return i<n/2?l.easeInBounce(i*2,0,t,n)*.5+e:l.easeOutBounce(i*2-n,0,t,n)*.5+t*.5+e};class ${constructor(){this.element=document.getElementById("userList"),document.getElementById("userList_add").addEventListener("click",this.add.bind(this)),document.getElementById("userList_delete").addEventListener("click",this.delete.bind(this)),window.matchMedia("(max-width: 767px)").addEventListener("change",this.mediaChange.bind(this)),window.addEventListener("hashchange",()=>{window.location.hash.slice(1)})}animateIn(){let e=this.element.getBoundingClientRect().x,t=0,n=350;(function r(a,d){let m=new Date-a;if(m<n){let E=Math.ceil(l.easeOutQuad(m,e,d,n));this.element.style.left=`${E}px`,requestAnimationFrame(r.bind(this,a,d))}}).bind(this)(new Date,t-e)}animateOut(){let e=this.element.getBoundingClientRect().x,t=-100,n=350;(function r(a,d){let m=new Date-a;if(m<n){let E=Math.floor(l.easeOutQuad(m,e,d,n));this.element.style.left=`${E}px`,requestAnimationFrame(r.bind(this,a,d))}}).bind(this)(new Date,t-e)}save(e){let t=document.createElement("li");t.addEventListener("click",this.navToForm.bind(this)),t.innerHTML=`
            <input id="user_${e.id}" type="radio" name="users" value="${e.id}" />
            <label for="user_${e.id}">
                <span>${e.last}, ${e.first}</span>
                <span>${e.username}</span>
                <span>${e.first}</span>
                <span>${e.last}</span>
                <span>${e.email}</span>
                <span>${e.password}</span>
                <span>${e.department.name}</span>
            </label>`,document.getElementById("userList_table").appendChild(t)}add(e){this.delegate.onNew()}update(e){for(let t of document.getElementsByName("users")){if(e.id!==parseInt(t.value))continue;let n=t.nextElementSibling.querySelectorAll("span");n[0].textContent=`${e.last}, ${e.first}`,n[1].textContent=e.username,n[2].textContent=e.first,n[3].textContent=e.last,n[4].textContent=e.email,n[5].textContent=e.password,n[6].textContent=e.department.name;break}}delete(e){let t=document.getElementsByName("users"),n=Array.from(t).find(r=>r.checked);if(n){let r=parseInt(n.value),a=this.users.find(d=>d.id===r);a&&(this.delegate.onDelete(a),n.parentElement.remove())}}reset(){document.getElementsByName("users").forEach(e=>e.checked=!1),document.getElementById("userList_delete").disabled=!0}navToForm(e){if(e.target.tagName.toLowerCase()!=="input")return;document.getElementById("userList_delete").disabled=!1;let t=parseInt(e.target.value);this.delegate.onSelect(this.users.find(n=>n.id===t))}mediaChange(e){e.matches&&(this.element.style.left="0px")}get users(){return this._users}set users(e){this._users=e}set delegate(e){this._delegate=e}get delegate(){return this._delegate}}class T extends C{static get NAME(){return"UserListMediator"}constructor(){super(T.NAME,new $)}onRegister(){this.userList.delegate={onNew:()=>this.onNew(),onSelect:e=>this.onSelect(e),onDelete:e=>this.onDelete(e)},this.userProxy=this.facade.retrieveProxy(L.NAME),this.userList.users=this.userProxy.users,this.userProxy.users.forEach(e=>this.userList.save(e))}onNew(){this.userList.reset(),this.sendNotification(u.NEW_USER)}onSelect(e){this.userList.animateOut(),this.sendNotification(u.USER_SELECTED,e)}onDelete(e){this.userProxy.remove(e),this.sendNotification(u.USER_DELETED)}listNotificationInterests(){return[u.USER_ADDED,u.USER_UPDATED,u.CANCEL_SELECTED]}handleNotification(e){switch(e.name){case u.USER_ADDED:this.userList.save(e.body),this.userList.reset();break;case u.USER_UPDATED:this.userList.update(e.body),this.userList.reset();break;case u.CANCEL_SELECTED:this.userList.animateIn(),this.userList.reset();break}}get userList(){return this.viewComponent}}class w{constructor(){c(this,"mode",w.MODE_ADD);this.element=document.getElementById("userForm"),document.getElementById("department").innerHTML=I.comboList.map(e=>`<option value="${e.id.toString()}">${e.name}</option>`).join(""),document.getElementById("userForm_role").addEventListener("click",this.navToRoles.bind(this)),document.getElementById("userForm_back").addEventListener("click",this.navBack.bind(this)),document.getElementById("userForm_submit").addEventListener("click",this.save.bind(this)),document.getElementById("userForm_cancel").addEventListener("click",this.navBack.bind(this)),window.matchMedia("(max-width: 767px)").addEventListener("change",this.mediaChange.bind(this))}static get MODE_ADD(){return"modeAdd"}static get MODE_EDIT(){return"modeEdit"}animateIn(){this.element.style.display="block";let e=this.element.getBoundingClientRect().x,t=0,n=500;(function r(a,d){let m=new Date-a;if(m<n){let E=Math.floor(l.easeOutQuad(m,e,d,n));this.element.style.left=`${E}px`,requestAnimationFrame(r.bind(this,a,d))}}).bind(this)(new Date,t-e)}animateOut(){let e=this.element.getBoundingClientRect().x,t=window.innerWidth+2,n=400;(function r(a,d,m){let E=new Date-a;if(E<n){let v=Math.ceil(l.easeOutQuad(E,e,d,n));this.element.style.left=`${v}px`,requestAnimationFrame(r.bind(this,a,d,m))}else m()}).bind(this)(new Date,t-e,()=>{this.element.style.display="none"})}save(e){let t=document.getElementById("department"),n=new N(this.user?this.user.id:0,document.getElementById("username").value,document.getElementById("first").value,document.getElementById("last").value,document.getElementById("email").value,document.getElementById("password").value,new I(t.selectedIndex,t.options[t.selectedIndex].text),this.user?this.user.roles:[]);n.isValid(document.getElementById("confirm").value)?this.mode===w.MODE_ADD?this.delegate.add(n):this.delegate.update(n):alert("Invalid Form.")}update(e){this.user=e,this.mode=w.MODE_EDIT,["first","last","email","username","password"].forEach(t=>document.getElementById(t).value=e[t]),document.getElementById("confirm").value=e.password,document.getElementById("department").selectedIndex=e.department.id,document.getElementById("userForm_submit").innerText="Update"}reset(){this.user=null,["first","last","email","username","password","confirm"].forEach(e=>document.getElementById(e).value=""),document.getElementById("department").selectedIndex=0,document.getElementById("userForm_submit").innerText="Save",this.mode=w.MODE_ADD}navToRoles(){this.delegate.showRoles()}navBack(){this.animateOut(),this.delegate.cancel()}mediaChange(e){e.matches?(this.element.style.left=window.innerWidth+"px",this.element.style.display="none"):this.element.style.display="block"}set delegate(e){this._delegate=e}get delegate(){return this._delegate}}class b extends C{static get NAME(){return"UserFormMediator"}constructor(){super(b.NAME,new w)}onRegister(){this.userForm.delegate={add:e=>this.onAdd(e),update:e=>this.onUpdate(e),cancel:()=>this.onCancel(),showRoles:()=>this.showRoles()},this.userProxy=this.facade.retrieveProxy(L.NAME)}onAdd(e){e.id=this.userProxy.newInsertId(),this.userProxy.add(e),this.facade.sendNotification(u.USER_ADDED,e),this.userForm.reset()}onUpdate(e){this.userProxy.update(e),this.facade.sendNotification(u.USER_UPDATED,e),this.userForm.reset()}onCancel(){this.facade.sendNotification(u.CANCEL_SELECTED),this.userForm.reset()}showRoles(){this.facade.sendNotification(u.ROLE_SHOW)}listNotificationInterests(){return[u.NEW_USER,u.USER_DELETED,u.USER_SELECTED]}handleNotification(e){switch(e.name){case u.NEW_USER:this.userForm.reset();break;case u.USER_DELETED:this.userForm.reset();break;case u.USER_SELECTED:this.userForm.animateIn(),this.userForm.update(e.body);break}}get userForm(){return this.viewComponent}}class k{constructor(){this.element=document.getElementById("userRole"),this.roleSet=new Set,document.getElementById("roles").innerHTML=y.comboList.map(e=>`<option value="${e.id.toString()}">${e.name}</option>`).join(""),document.getElementById("roles").addEventListener("change",this.roleChange.bind(this)),document.getElementById("userRole_add").addEventListener("click",this.update.bind(this)),document.getElementById("userRole_remove").addEventListener("click",this.delete.bind(this)),document.getElementById("userRole_dismiss").addEventListener("click",this.animateOut.bind(this)),window.matchMedia("(max-width: 767px)").addEventListener("change",this.mediaQueryChange.bind(this))}animateIn(){this.element.style.display="block";let e=this.element.getBoundingClientRect().height,t=0,n=500;(function r(a,d,m){let E=new Date-a;if(E<n){let v=Math.ceil(l.easeOutBack(E,e,d,n));m.style.backgroundColor=`rgba(128, 128, 128, ${.5*E/n})`,this.element.style.top=`${v}px`,requestAnimationFrame(r.bind(this,a,d,m))}}).bind(this)(new Date,t-e,document.getElementById("screen"))}animateOut(){let e=this.element.getBoundingClientRect().y,t=450,n=500;(function r(a,d,m){let E=new Date-a;if(E<=n){let v=Math.ceil(l.easeInBack(E,e,d,n));this.element.style.top=`${v}px`,requestAnimationFrame(r.bind(this,a,d,m))}else m()}).bind(this)(new Date,t-e,()=>{this.element.style.display="none"})}saveAll(e){e.length&&this.roleSet.add(...e),document.getElementById("userRole_list").innerHTML=e.map(t=>`<li data-id="${t.id.toString()}">${t.name}</li>`).join("")}update(e){let t=document.getElementById("roles"),n=t.options[t.selectedIndex],r=y.comboList.find(a=>a.id===parseInt(n.value));this.roleSet.has(r)||(this.roleSet.add(r),this.delegate.add(this._user,r),document.getElementById("userRole_list").innerHTML+=`<li data-id="${n.value}">${n.text}</li>`)}delete(e){let t=document.getElementById("roles"),n=t.options[t.selectedIndex],r=y.comboList.find(a=>a.id===parseInt(n.value));this.roleSet.has(r)&&(this.roleSet.delete(r),Array.from(document.getElementById("userRole_list").children).forEach(a=>{r.id===parseInt(a.dataset.id)&&(this._user&&this.delegate.remove(this._user,r),a.remove())}))}reset(){this._user=null,this.roleSet=new Set,document.getElementById("userRole_list").innerHTML="";let e=document.getElementById("roles");e.selectedIndex=0,e.dispatchEvent(new Event("change",{bubbles:!0}))}roleChange(e){let t=e.target.selectedIndex;document.getElementById("userRole_add").disabled=t===0,document.getElementById("userRole_remove").disabled=t===0}mediaQueryChange(e){e.matches?this.element.style.display="none":this.element.style.display="block"}set user(e){this._user=e}set delegate(e){this._delegate=e}get delegate(){return this._delegate}}class D extends C{static get NAME(){return"UserRoleMediator"}constructor(){super(D.NAME,new k)}onRegister(){this.userRole.delegate={add:(e,t)=>this.onAddRole(e,t),remove:(e,t)=>this.onRemoveRole(e,t)},this.roleProxy=this.facade.retrieveProxy(R.NAME)}onAddRole(e,t){this.roleProxy.addRoleToUser(e,t)}onRemoveRole(e,t){this.roleProxy.removeRoleFromUser(e,t)}listNotificationInterests(){return[u.NEW_USER,u.USER_ADDED,u.USER_UPDATED,u.USER_DELETED,u.USER_SELECTED,u.CANCEL_SELECTED,u.ROLE_SHOW]}handleNotification(e){switch(e.name){case u.NEW_USER:this.userRole.reset();break;case u.USER_ADDED:this.userRole.reset();break;case u.USER_UPDATED:this.userRole.reset();break;case u.USER_DELETED:this.userRole.reset();break;case u.USER_SELECTED:let t=e.body;this.userRole.user=t,this.userRole.saveAll(t.roles);break;case u.CANCEL_SELECTED:this.userRole.reset();break;case u.ROLE_SHOW:this.userRole.animateIn();break}}get userRole(){return this.viewComponent}}class z extends U{execute(e){let t=new L;t.add(new N(1,"lstooge","Larry","Stooge","larry@stooges.com","ijk456",I.ACCT,[y.EMP_BENEFITS])),t.add(new N(2,"cstooge","Curly","Stooge","curly@stooges.com","xyz987",I.SALES,[y.ACCT_RCV,y.GEN_LEDGER])),t.add(new N(3,"mstooge","Moe","Stooge","moe@stooges.com","abc123",I.PLANT,[y.PRODUCTION,y.SALES,y.SHIPPING])),this.facade.registerProxy(t),this.facade.registerProxy(new R),this.facade.registerMediator(new T),this.facade.registerMediator(new b),this.facade.registerMediator(new D)}}class u extends f{static get STARTUP(){return"startup"}static get NEW_USER(){return"newUser"}static get CANCEL_SELECTED(){return"cancelSelected"}static get USER_SELECTED(){return"userSelected"}static get USER_ADDED(){return"userAdded"}static get USER_UPDATED(){return"userUpdated"}static get USER_DELETED(){return"userDeleted"}static get ROLE_SHOW(){return"roleShow"}static get ROLE_HIDDEN(){return"roleHidden"}static get BACK(){return"back"}constructor(e){super(e)}initializeController(){super.initializeController(),this.registerCommand(u.STARTUP,()=>new z)}static getInstance(e){return f.getInstance(e,t=>new u(t))}startup(e){this.sendNotification(u.STARTUP,e)}}document.addEventListener("DOMContentLoaded",()=>{u.getInstance("EmployeeAdmin").startup()});
